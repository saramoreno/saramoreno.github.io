"use strict";(self.webpackChunkbonsai_web=self.webpackChunkbonsai_web||[]).push([[770],{6900:function(t,e,n){n.d(e,{FM:function(){return c},Lt:function(){return _},P:function(){return f},_f:function(){return v},jp:function(){return k},y3:function(){return m}});var i=n(5671),r=n(3144),o=n(5602),a=n(3681),u=n(8134),s=n(1704),y=n(6196),l=n(4198),h=function(t){return parseInt(t.toString().replace(/\W/g,""))},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,i.Z)(this,t),this.x=e,this.y=n}return(0,r.Z)(t,[{key:"toString",value:function(){return"{X: ".concat(this.x," Y: ").concat(this.y,"}")}},{key:"getClassName",value:function(){return"Vector2"}},{key:"getHashCode",value:function(){var t=h(this.x);return t=397*t^h(this.y)}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"asArray",value:function(){var t=new Array;return this.toArray(t,0),t}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"copyFromFloats",value:function(t,e){return this.x=t,this.y=e,this}},{key:"set",value:function(t,e){return this.copyFromFloats(t,e)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"addToRef",value:function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this}},{key:"addInPlace",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addVector3",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"subtractToRef",value:function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this}},{key:"subtractInPlace",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiplyInPlace",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiply",value:function(e){return new t(this.x*e.x,this.y*e.y)}},{key:"multiplyToRef",value:function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this}},{key:"multiplyByFloats",value:function(e,n){return new t(this.x*e,this.y*n)}},{key:"divide",value:function(e){return new t(this.x/e.x,this.y/e.y)}},{key:"divideToRef",value:function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"negate",value:function(){return new t(-this.x,-this.y)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this.x,-1*this.y)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this}},{key:"scale",value:function(e){var n=new t(0,0);return this.scaleToRef(e,n),n}},{key:"scaleToRef",value:function(t,e){return e.x=this.x*t,e.y=this.y*t,this}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this.x*t,e.y+=this.y*t,this}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this.x,t.x,e)&&o.R.WithinEpsilon(this.y,t.y,e)}},{key:"floor",value:function(){return new t(Math.floor(this.x),Math.floor(this.y))}},{key:"fract",value:function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}},{key:"rotateToRef",value:function(t,e){var n=Math.cos(t),i=Math.sin(t);return e.x=n*this.x-i*this.y,e.y=i*this.x+n*this.y,this}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return t.NormalizeToRef(this,this),this}},{key:"clone",value:function(){return new t(this.x,this.y)}}],[{key:"Zero",value:function(){return new t(0,0)}},{key:"One",value:function(){return new t(1,1)}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e[n],e[n+1])}},{key:"FromArrayToRef",value:function(t,e,n){n.x=t[e],n.y=t[e+1]}},{key:"CatmullRom",value:function(e,n,i,r,o){var a=o*o,u=o*a;return new t(.5*(2*n.x+(-e.x+i.x)*o+(2*e.x-5*n.x+4*i.x-r.x)*a+(-e.x+3*n.x-3*i.x+r.x)*u),.5*(2*n.y+(-e.y+i.y)*o+(2*e.y-5*n.y+4*i.y-r.y)*a+(-e.y+3*n.y-3*i.y+r.y)*u))}},{key:"Clamp",value:function(e,n,i){var r=e.x;r=(r=r>i.x?i.x:r)<n.x?n.x:r;var o=e.y;return new t(r,o=(o=o>i.y?i.y:o)<n.y?n.y:o)}},{key:"Hermite",value:function(e,n,i,r,o){var a=o*o,u=o*a,s=2*u-3*a+1,y=-2*u+3*a,l=u-2*a+o,h=u-a;return new t(e.x*s+i.x*y+n.x*l+r.x*h,e.y*s+i.y*y+n.y*l+r.y*h)}},{key:"Hermite1stDerivative",value:function(e,n,i,r,o){var a=t.Zero();return this.Hermite1stDerivativeToRef(e,n,i,r,o,a),a}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,i,r,o){var a=r*r;o.x=6*(a-r)*t.x+(3*a-4*r+1)*e.x+6*(-a+r)*n.x+(3*a-2*r)*i.x,o.y=6*(a-r)*t.y+(3*a-4*r+1)*e.y+6*(-a+r)*n.y+(3*a-2*r)*i.y}},{key:"Lerp",value:function(e,n,i){return new t(e.x+(n.x-e.x)*i,e.y+(n.y-e.y)*i)}},{key:"Dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"Normalize",value:function(e){var n=t.Zero();return this.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){var n=t.length();0!==n&&(e.x=t.x/n,e.y=t.y/n)}},{key:"Minimize",value:function(e,n){return new t(e.x<n.x?e.x:n.x,e.y<n.y?e.y:n.y)}},{key:"Maximize",value:function(e,n){return new t(e.x>n.x?e.x:n.x,e.y>n.y?e.y:n.y)}},{key:"Transform",value:function(e,n){var i=t.Zero();return t.TransformToRef(e,n,i),i}},{key:"TransformToRef",value:function(t,e,n){var i=e.m,r=t.x*i[0]+t.y*i[4]+i[12],o=t.x*i[1]+t.y*i[5]+i[13];n.x=r,n.y=o}},{key:"PointInTriangle",value:function(t,e,n,i){var r=.5*(-n.y*i.x+e.y*(-n.x+i.x)+e.x*(n.y-i.y)+n.x*i.y),o=r<0?-1:1,a=(e.y*i.x-e.x*i.y+(i.y-e.y)*t.x+(e.x-i.x)*t.y)*o,u=(e.x*n.y-e.y*n.x+(e.y-n.y)*t.x+(n.x-e.x)*t.y)*o;return a>0&&u>0&&a+u<2*r*o}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"DistanceOfPointFromSegment",value:function(e,n,i){var r=t.DistanceSquared(n,i);if(0===r)return t.Distance(e,n);var o=i.subtract(n),a=Math.max(0,Math.min(1,t.Dot(e.subtract(n),o)/r)),u=n.add(o.multiplyByFloats(a,a));return t.Distance(e,u)}}]),t}();c._ZeroReadOnly=c.Zero();var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,i.Z)(this,t),this._isDirty=!0,this._x=e,this._y=n,this._z=r}return(0,r.Z)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0}},{key:"toString",value:function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z,"}")}},{key:"getClassName",value:function(){return"Vector3"}},{key:"getHashCode",value:function(){var t=h(this._x);return t=397*(t=397*t^h(this._y))^h(this._z)}},{key:"asArray",value:function(){var t=[];return this.toArray(t,0),t}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"toQuaternion",value:function(){return v.RotationYawPitchRoll(this._y,this._x,this._z)}},{key:"addInPlace",value:function(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}},{key:"addInPlaceFromFloats",value:function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this}},{key:"add",value:function(e){return new t(this._x+e._x,this._y+e._y,this._z+e._z)}},{key:"addToRef",value:function(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}},{key:"subtractInPlace",value:function(t){return this.x-=t._x,this.y-=t._y,this.z-=t._z,this}},{key:"subtract",value:function(e){return new t(this._x-e._x,this._y-e._y,this._z-e._z)}},{key:"subtractToRef",value:function(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}},{key:"subtractFromFloats",value:function(e,n,i){return new t(this._x-e,this._y-n,this._z-i)}},{key:"subtractFromFloatsToRef",value:function(t,e,n,i){return i.copyFromFloats(this._x-t,this._y-e,this._z-n)}},{key:"negate",value:function(){return new t(-this._x,-this._y,-this._z)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"scale",value:function(e){return new t(this._x*e,this._y*e,this._z*e)}},{key:"scaleToRef",value:function(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)}},{key:"applyRotationQuaternionToRef",value:function(t,e){var n=t.w*this.x+t.y*this.z-t.z*this.y,i=t.w*this.y+t.z*this.x-t.x*this.z,r=t.w*this.z+t.x*this.y-t.y*this.x,o=-t.x*this.x-t.y*this.y-t.z*this.z;return e.x=n*t.w+o*-t.x+i*-t.z-r*-t.y,e.y=i*t.w+o*-t.y+r*-t.x-n*-t.z,e.z=r*t.w+o*-t.z+n*-t.y-i*-t.x,e}},{key:"applyRotationQuaternionInPlace",value:function(t){return this.applyRotationQuaternionToRef(t,this)}},{key:"applyRotationQuaternion",value:function(e){return this.applyRotationQuaternionToRef(e,t.Zero())}},{key:"scaleAndAddToRef",value:function(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}},{key:"projectOnPlane",value:function(e,n){var i=t.Zero();return this.projectOnPlaneToRef(e,n,i),i}},{key:"projectOnPlaneToRef",value:function(e,n,i){var r=e.normal,o=e.d,a=x.Vector3[0];this.subtractToRef(n,a),a.normalize();var u=t.Dot(a,r);if(Math.abs(u)<Math.pow(10,-10))i.setAll(1/0);else{var s=-(t.Dot(n,r)+o)/u,y=a.scaleInPlace(s);n.addToRef(y,i)}}},{key:"equals",value:function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this._x,t._x,e)&&o.R.WithinEpsilon(this._y,t._y,e)&&o.R.WithinEpsilon(this._z,t._z,e)}},{key:"equalsToFloats",value:function(t,e,n){return this._x===t&&this._y===e&&this._z===n}},{key:"multiplyInPlace",value:function(t){return this.x*=t._x,this.y*=t._y,this.z*=t._z,this}},{key:"multiply",value:function(t){return this.multiplyByFloats(t._x,t._y,t._z)}},{key:"multiplyToRef",value:function(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}},{key:"multiplyByFloats",value:function(e,n,i){return new t(this._x*e,this._y*n,this._z*i)}},{key:"divide",value:function(e){return new t(this._x/e._x,this._y/e._y,this._z/e._z)}},{key:"divideToRef",value:function(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"minimizeInPlace",value:function(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}},{key:"maximizeInPlace",value:function(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}},{key:"minimizeInPlaceFromFloats",value:function(t,e,n){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),n<this._z&&(this.z=n),this}},{key:"maximizeInPlaceFromFloats",value:function(t,e,n){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),n>this._z&&(this.z=n),this}},{key:"isNonUniformWithinEpsilon",value:function(t){var e=Math.abs(this._x),n=Math.abs(this._y);if(!o.R.WithinEpsilon(e,n,t))return!0;var i=Math.abs(this._z);return!o.R.WithinEpsilon(e,i,t)||!o.R.WithinEpsilon(n,i,t)}},{key:"isNonUniform",get:function(){var t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)}},{key:"floor",value:function(){return new t(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}},{key:"fract",value:function(){return new t(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z}},{key:"hasAZeroComponent",get:function(){return this._x*this._y*this._z==0}},{key:"normalize",value:function(){return this.normalizeFromLength(this.length())}},{key:"reorderInPlace",value:function(t){var e=this;return"xyz"===(t=t.toLowerCase())||(x.Vector3[0].copyFrom(this),["x","y","z"].forEach((function(n,i){e[n]=x.Vector3[0][t[i]]}))),this}},{key:"rotateByQuaternionToRef",value:function(e,n){return e.toRotationMatrix(x.Matrix[0]),t.TransformCoordinatesToRef(this,x.Matrix[0],n),n}},{key:"rotateByQuaternionAroundPointToRef",value:function(t,e,n){return this.subtractToRef(e,x.Vector3[0]),x.Vector3[0].rotateByQuaternionToRef(t,x.Vector3[0]),e.addToRef(x.Vector3[0],n),n}},{key:"cross",value:function(e){return t.Cross(this,e)}},{key:"normalizeFromLength",value:function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}},{key:"normalizeToNew",value:function(){var e=new t(0,0,0);return this.normalizeToRef(e),e}},{key:"normalizeToRef",value:function(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)}},{key:"clone",value:function(){return new t(this._x,this._y,this._z)}},{key:"copyFrom",value:function(t){return this.copyFromFloats(t._x,t._y,t._z)}},{key:"copyFromFloats",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"set",value:function(t,e,n){return this.copyFromFloats(t,e,n)}},{key:"setAll",value:function(t){return this.x=this.y=this.z=t,this}}],[{key:"GetClipFactor",value:function(e,n,i,r){var o=t.Dot(e,i)-r;return o/(o-(t.Dot(n,i)-r))}},{key:"GetAngleBetweenVectors",value:function(e,n,i){var r=e.normalizeToRef(x.Vector3[1]),a=n.normalizeToRef(x.Vector3[2]),u=t.Dot(r,a);u=o.R.Clamp(u,-1,1);var s=Math.acos(u),y=x.Vector3[3];return t.CrossToRef(r,a,y),t.Dot(y,i)>0?isNaN(s)?0:s:isNaN(s)?-Math.PI:-Math.acos(u)}},{key:"GetAngleBetweenVectorsOnPlane",value:function(e,n,i){x.Vector3[0].copyFrom(e);var r=x.Vector3[0];x.Vector3[1].copyFrom(n);var a=x.Vector3[1];x.Vector3[2].copyFrom(i);var u=x.Vector3[2],s=x.Vector3[3],y=x.Vector3[4];r.normalize(),a.normalize(),u.normalize(),t.CrossToRef(u,r,s),t.CrossToRef(s,u,y);var l=Math.atan2(t.Dot(a,s),t.Dot(a,y));return o.R.NormalizeRadians(l)}},{key:"SlerpToRef",value:function(e,n,i,r){i=o.R.Clamp(i,0,1);var u=x.Vector3[0],s=x.Vector3[1];u.copyFrom(e);var y=u.length();u.normalizeFromLength(y),s.copyFrom(n);var l=s.length();s.normalizeFromLength(l);var h,c,f=t.Dot(u,s);if(f<1-a.kn){var _=Math.acos(f),v=1/Math.sin(_);h=Math.sin((1-i)*_)*v,c=Math.sin(i*_)*v}else h=1-i,c=i;u.scaleInPlace(h),s.scaleInPlace(c),r.copyFrom(u).addInPlace(s),r.scaleInPlace(o.R.Lerp(y,l,i))}},{key:"SmoothToRef",value:function(e,n,i,r,o){t.SlerpToRef(e,n,0===r?1:i/r,o)}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e[n],e[n+1],e[n+2])}},{key:"FromFloatArray",value:function(e,n){return t.FromArray(e,n)}},{key:"FromArrayToRef",value:function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2]}},{key:"FromFloatArrayToRef",value:function(e,n,i){return t.FromArrayToRef(e,n,i)}},{key:"FromFloatsToRef",value:function(t,e,n,i){i.copyFromFloats(t,e,n)}},{key:"Zero",value:function(){return new t(0,0,0)}},{key:"One",value:function(){return new t(1,1,1)}},{key:"Up",value:function(){return new t(0,1,0)}},{key:"UpReadOnly",get:function(){return t._UpReadOnly}},{key:"DownReadOnly",get:function(){return t._DownReadOnly}},{key:"RightReadOnly",get:function(){return t._RightReadOnly}},{key:"LeftReadOnly",get:function(){return t._LeftReadOnly}},{key:"LeftHandedForwardReadOnly",get:function(){return t._LeftHandedForwardReadOnly}},{key:"RightHandedForwardReadOnly",get:function(){return t._RightHandedForwardReadOnly}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"Down",value:function(){return new t(0,-1,0)}},{key:"Forward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new t(0,0,e?-1:1)}},{key:"Backward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new t(0,0,e?1:-1)}},{key:"Right",value:function(){return new t(1,0,0)}},{key:"Left",value:function(){return new t(-1,0,0)}},{key:"TransformCoordinates",value:function(e,n){var i=t.Zero();return t.TransformCoordinatesToRef(e,n,i),i}},{key:"TransformCoordinatesToRef",value:function(e,n,i){t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,n,i)}},{key:"TransformCoordinatesFromFloatsToRef",value:function(t,e,n,i,r){var o=i.m,a=t*o[0]+e*o[4]+n*o[8]+o[12],u=t*o[1]+e*o[5]+n*o[9]+o[13],s=t*o[2]+e*o[6]+n*o[10]+o[14],y=1/(t*o[3]+e*o[7]+n*o[11]+o[15]);r.x=a*y,r.y=u*y,r.z=s*y}},{key:"TransformNormal",value:function(e,n){var i=t.Zero();return t.TransformNormalToRef(e,n,i),i}},{key:"TransformNormalToRef",value:function(t,e,n){this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,n)}},{key:"TransformNormalFromFloatsToRef",value:function(t,e,n,i,r){var o=i.m;r.x=t*o[0]+e*o[4]+n*o[8],r.y=t*o[1]+e*o[5]+n*o[9],r.z=t*o[2]+e*o[6]+n*o[10]}},{key:"CatmullRom",value:function(e,n,i,r,o){var a=o*o,u=o*a;return new t(.5*(2*n._x+(-e._x+i._x)*o+(2*e._x-5*n._x+4*i._x-r._x)*a+(-e._x+3*n._x-3*i._x+r._x)*u),.5*(2*n._y+(-e._y+i._y)*o+(2*e._y-5*n._y+4*i._y-r._y)*a+(-e._y+3*n._y-3*i._y+r._y)*u),.5*(2*n._z+(-e._z+i._z)*o+(2*e._z-5*n._z+4*i._z-r._z)*a+(-e._z+3*n._z-3*i._z+r._z)*u))}},{key:"Clamp",value:function(e,n,i){var r=new t;return t.ClampToRef(e,n,i,r),r}},{key:"ClampToRef",value:function(t,e,n,i){var r=t._x;r=(r=r>n._x?n._x:r)<e._x?e._x:r;var o=t._y;o=(o=o>n._y?n._y:o)<e._y?e._y:o;var a=t._z;a=(a=a>n._z?n._z:a)<e._z?e._z:a,i.copyFromFloats(r,o,a)}},{key:"CheckExtends",value:function(t,e,n){e.minimizeInPlace(t),n.maximizeInPlace(t)}},{key:"Hermite",value:function(e,n,i,r,o){var a=o*o,u=o*a,s=2*u-3*a+1,y=-2*u+3*a,l=u-2*a+o,h=u-a;return new t(e._x*s+i._x*y+n._x*l+r._x*h,e._y*s+i._y*y+n._y*l+r._y*h,e._z*s+i._z*y+n._z*l+r._z*h)}},{key:"Hermite1stDerivative",value:function(e,n,i,r,o){var a=t.Zero();return this.Hermite1stDerivativeToRef(e,n,i,r,o,a),a}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,i,r,o){var a=r*r;o.x=6*(a-r)*t.x+(3*a-4*r+1)*e.x+6*(-a+r)*n.x+(3*a-2*r)*i.x,o.y=6*(a-r)*t.y+(3*a-4*r+1)*e.y+6*(-a+r)*n.y+(3*a-2*r)*i.y,o.z=6*(a-r)*t.z+(3*a-4*r+1)*e.z+6*(-a+r)*n.z+(3*a-2*r)*i.z}},{key:"Lerp",value:function(e,n,i){var r=new t(0,0,0);return t.LerpToRef(e,n,i,r),r}},{key:"LerpToRef",value:function(t,e,n,i){i.x=t._x+(e._x-t._x)*n,i.y=t._y+(e._y-t._y)*n,i.z=t._z+(e._z-t._z)*n}},{key:"Dot",value:function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}},{key:"Cross",value:function(e,n){var i=t.Zero();return t.CrossToRef(e,n,i),i}},{key:"CrossToRef",value:function(t,e,n){var i=t._y*e._z-t._z*e._y,r=t._z*e._x-t._x*e._z,o=t._x*e._y-t._y*e._x;n.copyFromFloats(i,r,o)}},{key:"Normalize",value:function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){t.normalizeToRef(e)}},{key:"Project",value:function(e,n,i,r){var o=new t;return t.ProjectToRef(e,n,i,r,o),o}},{key:"ProjectToRef",value:function(e,n,i,r,o){var a=r.width,u=r.height,s=r.x,y=r.y,l=x.Matrix[1];m.FromValuesToRef(a/2,0,0,0,0,-u/2,0,0,0,0,.5,0,s+a/2,u/2+y,.5,1,l);var h=x.Matrix[0];return n.multiplyToRef(i,h),h.multiplyToRef(l,h),t.TransformCoordinatesToRef(e,h,o),o}},{key:"_UnprojectFromInvertedMatrixToRef",value:function(e,n,i){t.TransformCoordinatesToRef(e,n,i);var r=n.m,a=e._x*r[3]+e._y*r[7]+e._z*r[11]+r[15];o.R.WithinEpsilon(a,1)&&i.scaleInPlace(1/a)}},{key:"UnprojectFromTransform",value:function(t,e,n,i,r){return this.Unproject(t,e,n,i,r,m.IdentityReadOnly)}},{key:"Unproject",value:function(e,n,i,r,o,a){var u=t.Zero();return t.UnprojectToRef(e,n,i,r,o,a,u),u}},{key:"UnprojectToRef",value:function(e,n,i,r,o,a,u){t.UnprojectFloatsToRef(e._x,e._y,e._z,n,i,r,o,a,u)}},{key:"UnprojectFloatsToRef",value:function(e,n,i,r,o,a,u,s,y){var h,c=x.Matrix[0];a.multiplyToRef(u,c),c.multiplyToRef(s,c),c.invert();var f=x.Vector3[0];f.x=e/r*2-1,f.y=-(n/o*2-1),null!==(h=l.l.LastCreatedEngine)&&void 0!==h&&h.isNDCHalfZRange?f.z=i:f.z=2*i-1,t._UnprojectFromInvertedMatrixToRef(f,c,y)}},{key:"Minimize",value:function(t,e){var n=t.clone();return n.minimizeInPlace(e),n}},{key:"Maximize",value:function(t,e){var n=t.clone();return n.maximizeInPlace(e),n}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t._x-e._x,i=t._y-e._y,r=t._z-e._z;return n*n+i*i+r*r}},{key:"ProjectOnTriangleToRef",value:function(e,n,i,r,u){var s=x.Vector3[0],y=x.Vector3[1],l=x.Vector3[2],h=x.Vector3[3],c=x.Vector3[4];i.subtractToRef(n,s),r.subtractToRef(n,y),r.subtractToRef(i,l);var f=s.length(),_=y.length(),v=l.length();if(f<a.kn||_<a.kn||v<a.kn)return u.copyFrom(n),t.Distance(e,n);e.subtractToRef(n,c),t.CrossToRef(s,y,h);var m=h.length();if(m<a.kn)return u.copyFrom(n),t.Distance(e,n);h.normalizeFromLength(m);var k=c.length();if(k<a.kn)return u.copyFrom(n),0;c.normalizeFromLength(k);var R=t.Dot(h,c),d=x.Vector3[5],z=x.Vector3[6];d.copyFrom(h).scaleInPlace(-k*R),z.copyFrom(e).addInPlace(d);var T=x.Vector3[4],w=x.Vector3[5],p=x.Vector3[7],F=x.Vector3[8];T.copyFrom(s).scaleInPlace(1/f),F.copyFrom(y).scaleInPlace(1/_),T.addInPlace(F).scaleInPlace(-1),w.copyFrom(s).scaleInPlace(-1/f),F.copyFrom(l).scaleInPlace(1/v),w.addInPlace(F).scaleInPlace(-1),p.copyFrom(l).scaleInPlace(-1/v),F.copyFrom(y).scaleInPlace(-1/_),p.addInPlace(F).scaleInPlace(-1);var g=x.Vector3[9];g.copyFrom(z).subtractInPlace(n),t.CrossToRef(T,g,F);var I=t.Dot(F,h);g.copyFrom(z).subtractInPlace(i),t.CrossToRef(w,g,F);var M=t.Dot(F,h);g.copyFrom(z).subtractInPlace(r),t.CrossToRef(p,g,F);var A,P,V=t.Dot(F,h),D=x.Vector3[10];I>0&&M<0?(D.copyFrom(s),A=n,P=i):M>0&&V<0?(D.copyFrom(l),A=i,P=r):(D.copyFrom(y).scaleInPlace(-1),A=r,P=n);var C=x.Vector3[9],L=x.Vector3[4];if(A.subtractToRef(z,F),P.subtractToRef(z,C),t.CrossToRef(F,C,L),!(t.Dot(L,h)<0))return u.copyFrom(z),Math.abs(k*R);var Z=x.Vector3[5];t.CrossToRef(D,L,Z),Z.normalize();var H=x.Vector3[9];H.copyFrom(A).subtractInPlace(z);var O=H.length();if(O<a.kn)return u.copyFrom(A),t.Distance(e,A);H.normalizeFromLength(O);var S=t.Dot(Z,H),b=x.Vector3[7];b.copyFrom(z).addInPlace(Z.scaleInPlace(O*S)),F.copyFrom(b).subtractInPlace(A),k=D.length(),D.normalizeFromLength(k);var U=t.Dot(F,D)/Math.max(k,a.kn);return U=o.R.Clamp(U,0,1),b.copyFrom(A).addInPlace(D.scaleInPlace(U*k)),u.copyFrom(b),t.Distance(e,b)}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}},{key:"RotationFromAxis",value:function(e,n,i){var r=t.Zero();return t.RotationFromAxisToRef(e,n,i,r),r}},{key:"RotationFromAxisToRef",value:function(t,e,n,i){var r=x.Quaternion[0];v.RotationQuaternionFromAxisToRef(t,e,n,r),r.toEulerAnglesToRef(i)}}]),t}();f._UpReadOnly=f.Up(),f._DownReadOnly=f.Down(),f._LeftHandedForwardReadOnly=f.Forward(!1),f._RightHandedForwardReadOnly=f.Forward(!0),f._RightReadOnly=f.Right(),f._LeftReadOnly=f.Left(),f._ZeroReadOnly=f.Zero();var _=function(){function t(e,n,r,o){(0,i.Z)(this,t),this.x=e,this.y=n,this.z=r,this.w=o}return(0,r.Z)(t,[{key:"toString",value:function(){return"{X: ".concat(this.x," Y: ").concat(this.y," Z: ").concat(this.z," W: ").concat(this.w,"}")}},{key:"getClassName",value:function(){return"Vector4"}},{key:"getHashCode",value:function(){var t=h(this.x);return t=397*(t=397*(t=397*t^h(this.y))^h(this.z))^h(this.w)}},{key:"asArray",value:function(){var t=new Array;return this.toArray(t,0),t}},{key:"toArray",value:function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.FromArrayToRef(e,n,this),this}},{key:"addInPlace",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}},{key:"addToRef",value:function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this}},{key:"subtractInPlace",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}},{key:"subtractToRef",value:function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this}},{key:"subtractFromFloats",value:function(e,n,i,r){return new t(this.x-e,this.y-n,this.z-i,this.w-r)}},{key:"subtractFromFloatsToRef",value:function(t,e,n,i,r){return r.x=this.x-t,r.y=this.y-e,r.z=this.z-n,r.w=this.w-i,this}},{key:"negate",value:function(){return new t(-this.x,-this.y,-this.z,-this.w)}},{key:"negateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}},{key:"negateToRef",value:function(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"scale",value:function(e){return new t(this.x*e,this.y*e,this.z*e,this.w*e)}},{key:"scaleToRef",value:function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}},{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this.x,t.x,e)&&o.R.WithinEpsilon(this.y,t.y,e)&&o.R.WithinEpsilon(this.z,t.z,e)&&o.R.WithinEpsilon(this.w,t.w,e)}},{key:"equalsToFloats",value:function(t,e,n,i){return this.x===t&&this.y===e&&this.z===n&&this.w===i}},{key:"multiplyInPlace",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiply",value:function(e){return new t(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}},{key:"multiplyToRef",value:function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this}},{key:"multiplyByFloats",value:function(e,n,i,r){return new t(this.x*e,this.y*n,this.z*i,this.w*r)}},{key:"divide",value:function(e){return new t(this.x/e.x,this.y/e.y,this.z/e.z,this.w/e.w)}},{key:"divideToRef",value:function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this}},{key:"divideInPlace",value:function(t){return this.divideToRef(t,this)}},{key:"minimizeInPlace",value:function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}},{key:"maximizeInPlace",value:function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}},{key:"floor",value:function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}},{key:"fract",value:function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"normalize",value:function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)}},{key:"toVector3",value:function(){return new f(this.x,this.y,this.z)}},{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}},{key:"copyFromFloats",value:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}},{key:"set",value:function(t,e,n,i){return this.copyFromFloats(t,e,n,i)}},{key:"setAll",value:function(t){return this.x=this.y=this.z=this.w=t,this}}],[{key:"FromArray",value:function(e,n){return n||(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])}},{key:"FromArrayToRef",value:function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3]}},{key:"FromFloatArrayToRef",value:function(e,n,i){t.FromArrayToRef(e,n,i)}},{key:"FromFloatsToRef",value:function(t,e,n,i,r){r.x=t,r.y=e,r.z=n,r.w=i}},{key:"Zero",value:function(){return new t(0,0,0,0)}},{key:"One",value:function(){return new t(1,1,1,1)}},{key:"ZeroReadOnly",get:function(){return t._ZeroReadOnly}},{key:"Normalize",value:function(e){var n=t.Zero();return t.NormalizeToRef(e,n),n}},{key:"NormalizeToRef",value:function(t,e){e.copyFrom(t),e.normalize()}},{key:"Minimize",value:function(t,e){var n=t.clone();return n.minimizeInPlace(e),n}},{key:"Maximize",value:function(t,e){var n=t.clone();return n.maximizeInPlace(e),n}},{key:"Distance",value:function(e,n){return Math.sqrt(t.DistanceSquared(e,n))}},{key:"DistanceSquared",value:function(t,e){var n=t.x-e.x,i=t.y-e.y,r=t.z-e.z,o=t.w-e.w;return n*n+i*i+r*r+o*o}},{key:"Center",value:function(e,n){return t.CenterToRef(e,n,t.Zero())}},{key:"CenterToRef",value:function(t,e,n){return n.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}},{key:"TransformCoordinates",value:function(e,n){var i=t.Zero();return t.TransformCoordinatesToRef(e,n,i),i}},{key:"TransformCoordinatesToRef",value:function(e,n,i){t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,n,i)}},{key:"TransformCoordinatesFromFloatsToRef",value:function(t,e,n,i,r){var o=i.m,a=t*o[0]+e*o[4]+n*o[8]+o[12],u=t*o[1]+e*o[5]+n*o[9]+o[13],s=t*o[2]+e*o[6]+n*o[10]+o[14],y=t*o[3]+e*o[7]+n*o[11]+o[15];r.x=a,r.y=u,r.z=s,r.w=y}},{key:"TransformNormal",value:function(e,n){var i=t.Zero();return t.TransformNormalToRef(e,n,i),i}},{key:"TransformNormalToRef",value:function(t,e,n){var i=e.m,r=t.x*i[0]+t.y*i[4]+t.z*i[8],o=t.x*i[1]+t.y*i[5]+t.z*i[9],a=t.x*i[2]+t.y*i[6]+t.z*i[10];n.x=r,n.y=o,n.z=a,n.w=t.w}},{key:"TransformNormalFromFloatsToRef",value:function(t,e,n,i,r,o){var a=r.m;o.x=t*a[0]+e*a[4]+n*a[8],o.y=t*a[1]+e*a[5]+n*a[9],o.z=t*a[2]+e*a[6]+n*a[10],o.w=i}},{key:"FromVector3",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(e._x,e._y,e._z,n)}}]),t}();_._ZeroReadOnly=_.Zero();var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,i.Z)(this,t),this._isDirty=!0,this._x=e,this._y=n,this._z=r,this._w=o}return(0,r.Z)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._isDirty=!0}},{key:"toString",value:function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z," W: ").concat(this._w,"}")}},{key:"getClassName",value:function(){return"Quaternion"}},{key:"getHashCode",value:function(){var t=h(this._x);return t=397*(t=397*(t=397*t^h(this._y))^h(this._z))^h(this._w)}},{key:"asArray",value:function(){return[this._x,this._y,this._z,this._w]}},{key:"toArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}},{key:"equals",value:function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}},{key:"equalsWithEpsilon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.kn;return t&&o.R.WithinEpsilon(this._x,t._x,e)&&o.R.WithinEpsilon(this._y,t._y,e)&&o.R.WithinEpsilon(this._z,t._z,e)&&o.R.WithinEpsilon(this._w,t._w,e)}},{key:"clone",value:function(){return new t(this._x,this._y,this._z,this._w)}},{key:"copyFrom",value:function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this.w=t._w,this}},{key:"copyFromFloats",value:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}},{key:"set",value:function(t,e,n,i){return this.copyFromFloats(t,e,n,i)}},{key:"add",value:function(e){return new t(this._x+e._x,this._y+e._y,this._z+e._z,this._w+e._w)}},{key:"addInPlace",value:function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this}},{key:"subtract",value:function(e){return new t(this._x-e._x,this._y-e._y,this._z-e._z,this._w-e._w)}},{key:"subtractInPlace",value:function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this}},{key:"scale",value:function(e){return new t(this._x*e,this._y*e,this._z*e,this._w*e)}},{key:"scaleToRef",value:function(t,e){return e.x=this._x*t,e.y=this._y*t,e.z=this._z*t,e.w=this._w*t,this}},{key:"scaleInPlace",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"scaleAndAddToRef",value:function(t,e){return e.x+=this._x*t,e.y+=this._y*t,e.z+=this._z*t,e.w+=this._w*t,this}},{key:"multiply",value:function(e){var n=new t(0,0,0,1);return this.multiplyToRef(e,n),n}},{key:"multiplyToRef",value:function(t,e){var n=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,i=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,r=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,o=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(n,i,r,o),this}},{key:"multiplyInPlace",value:function(t){return this.multiplyToRef(t,this),this}},{key:"conjugateToRef",value:function(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),this}},{key:"conjugateInPlace",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"conjugate",value:function(){return new t(-this._x,-this._y,-this._z,this._w)}},{key:"invert",value:function(){var t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}},{key:"invertInPlace",value:function(){this.conjugateInPlace();var t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"normalize",value:function(){var t=this.length();if(0===t)return this;var e=1/t;return this.scaleInPlace(e),this}},{key:"normalizeToNew",value:function(){var t=this.length();if(0===t)return this.clone();var e=1/t;return this.scale(e)}},{key:"toEulerAngles",value:function(){var t=f.Zero();return this.toEulerAnglesToRef(t),t}},{key:"toEulerAnglesToRef",value:function(t){var e=this._z,n=this._x,i=this._y,r=this._w,o=i*e-n*r,a=.4999999;if(o<-a)t.y=2*Math.atan2(i,r),t.x=Math.PI/2,t.z=0;else if(o>a)t.y=2*Math.atan2(i,r),t.x=-Math.PI/2,t.z=0;else{var u=r*r,s=e*e,y=n*n,l=i*i;t.z=Math.atan2(2*(n*i+e*r),-s-y+l+u),t.x=Math.asin(-2*o),t.y=Math.atan2(2*(e*n+i*r),s-y-l+u)}return this}},{key:"toRotationMatrix",value:function(t){return m.FromQuaternionToRef(this,t),this}},{key:"fromRotationMatrix",value:function(e){return t.FromRotationMatrixToRef(e,this),this}}],[{key:"FromRotationMatrix",value:function(e){var n=new t;return t.FromRotationMatrixToRef(e,n),n}},{key:"FromRotationMatrixToRef",value:function(t,e){var n,i=t.m,r=i[0],o=i[4],a=i[8],u=i[1],s=i[5],y=i[9],l=i[2],h=i[6],c=i[10],f=r+s+c;f>0?(n=.5/Math.sqrt(f+1),e.w=.25/n,e.x=(h-y)*n,e.y=(a-l)*n,e.z=(u-o)*n):r>s&&r>c?(n=2*Math.sqrt(1+r-s-c),e.w=(h-y)/n,e.x=.25*n,e.y=(o+u)/n,e.z=(a+l)/n):s>c?(n=2*Math.sqrt(1+s-r-c),e.w=(a-l)/n,e.x=(o+u)/n,e.y=.25*n,e.z=(y+h)/n):(n=2*Math.sqrt(1+c-r-s),e.w=(u-o)/n,e.x=(a+l)/n,e.y=(y+h)/n,e.z=.25*n)}},{key:"Dot",value:function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}},{key:"AreClose",value:function(e,n){return t.Dot(e,n)>=0}},{key:"SmoothToRef",value:function(e,n,i,r,a){var u=0===r?1:i/r;u=o.R.Clamp(u,0,1),t.SlerpToRef(e,n,u,a)}},{key:"Zero",value:function(){return new t(0,0,0,0)}},{key:"Inverse",value:function(e){return new t(-e._x,-e._y,-e._z,e._w)}},{key:"InverseToRef",value:function(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}},{key:"Identity",value:function(){return new t(0,0,0,1)}},{key:"IsIdentity",value:function(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}},{key:"RotationAxis",value:function(e,n){return t.RotationAxisToRef(e,n,new t)}},{key:"RotationAxisToRef",value:function(t,e,n){var i=Math.sin(e/2);return t.normalize(),n.w=Math.cos(e/2),n.x=t._x*i,n.y=t._y*i,n.z=t._z*i,n}},{key:"FromArray",value:function(e,n){return n||(n=0),new t(e[n],e[n+1],e[n+2],e[n+3])}},{key:"FromArrayToRef",value:function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3]}},{key:"FromEulerAngles",value:function(e,n,i){var r=new t;return t.RotationYawPitchRollToRef(n,e,i,r),r}},{key:"FromEulerAnglesToRef",value:function(e,n,i,r){return t.RotationYawPitchRollToRef(n,e,i,r),r}},{key:"FromEulerVector",value:function(e){var n=new t;return t.RotationYawPitchRollToRef(e._y,e._x,e._z,n),n}},{key:"FromEulerVectorToRef",value:function(e,n){return t.RotationYawPitchRollToRef(e._y,e._x,e._z,n),n}},{key:"FromUnitVectorsToRef",value:function(t,e,n){var i=f.Dot(t,e)+1;return i<a.kn?Math.abs(t.x)>Math.abs(t.z)?n.set(-t.y,t.x,0,0):n.set(0,-t.z,t.y,0):(f.CrossToRef(t,e,k.Vector3[0]),n.set(k.Vector3[0].x,k.Vector3[0].y,k.Vector3[0].z,i)),n.normalize()}},{key:"RotationYawPitchRoll",value:function(e,n,i){var r=new t;return t.RotationYawPitchRollToRef(e,n,i,r),r}},{key:"RotationYawPitchRollToRef",value:function(t,e,n,i){var r=.5*n,o=.5*e,a=.5*t,u=Math.sin(r),s=Math.cos(r),y=Math.sin(o),l=Math.cos(o),h=Math.sin(a),c=Math.cos(a);i.x=c*y*s+h*l*u,i.y=h*l*s-c*y*u,i.z=c*l*u-h*y*s,i.w=c*l*s+h*y*u}},{key:"RotationAlphaBetaGamma",value:function(e,n,i){var r=new t;return t.RotationAlphaBetaGammaToRef(e,n,i,r),r}},{key:"RotationAlphaBetaGammaToRef",value:function(t,e,n,i){var r=.5*(n+t),o=.5*(n-t),a=.5*e;i.x=Math.cos(o)*Math.sin(a),i.y=Math.sin(o)*Math.sin(a),i.z=Math.sin(r)*Math.cos(a),i.w=Math.cos(r)*Math.cos(a)}},{key:"RotationQuaternionFromAxis",value:function(e,n,i){var r=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(e,n,i,r),r}},{key:"RotationQuaternionFromAxisToRef",value:function(e,n,i,r){var o=x.Matrix[0];m.FromXYZAxesToRef(e.normalize(),n.normalize(),i.normalize(),o),t.FromRotationMatrixToRef(o,r)}},{key:"FromLookDirectionLH",value:function(e,n){var i=new t;return t.FromLookDirectionLHToRef(e,n,i),i}},{key:"FromLookDirectionLHToRef",value:function(e,n,i){var r=x.Matrix[0];m.LookDirectionLHToRef(e,n,r),t.FromRotationMatrixToRef(r,i)}},{key:"FromLookDirectionRH",value:function(e,n){var i=new t;return t.FromLookDirectionRHToRef(e,n,i),i}},{key:"FromLookDirectionRHToRef",value:function(e,n,i){var r=x.Matrix[0];return m.LookDirectionRHToRef(e,n,r),t.FromRotationMatrixToRef(r,i)}},{key:"Slerp",value:function(e,n,i){var r=t.Identity();return t.SlerpToRef(e,n,i,r),r}},{key:"SlerpToRef",value:function(t,e,n,i){var r,o,a=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,u=!1;if(a<0&&(u=!0,a=-a),a>.999999)o=1-n,r=u?-n:n;else{var s=Math.acos(a),y=1/Math.sin(s);o=Math.sin((1-n)*s)*y,r=u?-Math.sin(n*s)*y:Math.sin(n*s)*y}i.x=o*t._x+r*e._x,i.y=o*t._y+r*e._y,i.z=o*t._z+r*e._z,i.w=o*t._w+r*e._w}},{key:"Hermite",value:function(e,n,i,r,o){var a=o*o,u=o*a,s=2*u-3*a+1,y=-2*u+3*a,l=u-2*a+o,h=u-a;return new t(e._x*s+i._x*y+n._x*l+r._x*h,e._y*s+i._y*y+n._y*l+r._y*h,e._z*s+i._z*y+n._z*l+r._z*h,e._w*s+i._w*y+n._w*l+r._w*h)}},{key:"Hermite1stDerivative",value:function(e,n,i,r,o){var a=t.Zero();return this.Hermite1stDerivativeToRef(e,n,i,r,o,a),a}},{key:"Hermite1stDerivativeToRef",value:function(t,e,n,i,r,o){var a=r*r;o.x=6*(a-r)*t.x+(3*a-4*r+1)*e.x+6*(-a+r)*n.x+(3*a-2*r)*i.x,o.y=6*(a-r)*t.y+(3*a-4*r+1)*e.y+6*(-a+r)*n.y+(3*a-2*r)*i.y,o.z=6*(a-r)*t.z+(3*a-4*r+1)*e.z+6*(-a+r)*n.z+(3*a-2*r)*i.z,o.w=6*(a-r)*t.w+(3*a-4*r+1)*e.w+6*(-a+r)*n.w+(3*a-2*r)*i.w}}]),t}(),m=function(){function t(){(0,i.Z)(this,t),this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,y.Z.MatrixTrackPrecisionChange&&y.Z.MatrixTrackedMatrices.push(this),this._m=new y.Z.MatrixCurrentType(16),this.markAsUpdated()}return(0,r.Z)(t,[{key:"m",get:function(){return this._m}},{key:"markAsUpdated",value:function(){this.updateFlag=t._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}},{key:"_updateIdentityStatus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._isIdentity=t,this._isIdentity3x2=t||n,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i}},{key:"isIdentity",value:function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}},{key:"isIdentityAs3x2",value:function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}},{key:"determinant",value:function(){if(!0===this._isIdentity)return 1;var t=this._m,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],u=t[6],s=t[7],y=t[8],l=t[9],h=t[10],c=t[11],f=t[12],_=t[13],v=t[14],m=t[15],x=h*m-v*c,k=l*m-_*c,R=l*v-_*h,d=y*m-f*c,z=y*v-h*f,T=y*_-f*l;return e*+(a*x-u*k+s*R)+n*-(o*x-u*d+s*z)+i*+(o*k-a*d+s*T)+r*-(o*R-a*z+u*T)}},{key:"toArray",value:function(){return this._m}},{key:"asArray",value:function(){return this._m}},{key:"invert",value:function(){return this.invertToRef(this),this}},{key:"reset",value:function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}},{key:"add",value:function(e){var n=new t;return this.addToRef(e,n),n}},{key:"addToRef",value:function(t,e){for(var n=this._m,i=e._m,r=t.m,o=0;o<16;o++)i[o]=n[o]+r[o];return e.markAsUpdated(),this}},{key:"addToSelf",value:function(t){for(var e=this._m,n=t.m,i=0;i<16;i++)e[i]+=n[i];return this.markAsUpdated(),this}},{key:"invertToRef",value:function(e){if(!0===this._isIdentity)return t.IdentityToRef(e),this;var n=this._m,i=n[0],r=n[1],o=n[2],a=n[3],u=n[4],s=n[5],y=n[6],l=n[7],h=n[8],c=n[9],f=n[10],_=n[11],v=n[12],m=n[13],x=n[14],k=n[15],R=f*k-x*_,d=c*k-m*_,z=c*x-m*f,T=h*k-v*_,w=h*x-f*v,p=h*m-v*c,F=+(s*R-y*d+l*z),g=-(u*R-y*T+l*w),I=+(u*d-s*T+l*p),M=-(u*z-s*w+y*p),A=i*F+r*g+o*I+a*M;if(0===A)return e.copyFrom(this),this;var P=1/A,V=y*k-x*l,D=s*k-m*l,C=s*x-m*y,L=u*k-v*l,Z=u*x-v*y,H=u*m-v*s,O=y*_-f*l,S=s*_-c*l,b=s*f-c*y,U=u*_-h*l,q=u*f-h*y,B=u*c-h*s,N=-(r*R-o*d+a*z),E=+(i*R-o*T+a*w),Q=-(i*d-r*T+a*p),W=+(i*z-r*w+o*p),Y=+(r*V-o*D+a*C),j=-(i*V-o*L+a*Z),G=+(i*D-r*L+a*H),X=-(i*C-r*Z+o*H),J=-(r*O-o*S+a*b),K=+(i*O-o*U+a*q),$=-(i*S-r*U+a*B),tt=+(i*b-r*q+o*B);return t.FromValuesToRef(F*P,N*P,Y*P,J*P,g*P,E*P,j*P,K*P,I*P,Q*P,G*P,$*P,M*P,W*P,X*P,tt*P,e),this}},{key:"addAtIndex",value:function(t,e){return this._m[t]+=e,this.markAsUpdated(),this}},{key:"multiplyAtIndex",value:function(t,e){return this._m[t]*=e,this.markAsUpdated(),this}},{key:"setTranslationFromFloats",value:function(t,e,n){return this._m[12]=t,this._m[13]=e,this._m[14]=n,this.markAsUpdated(),this}},{key:"addTranslationFromFloats",value:function(t,e,n){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=n,this.markAsUpdated(),this}},{key:"setTranslation",value:function(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}},{key:"getTranslation",value:function(){return new f(this._m[12],this._m[13],this._m[14])}},{key:"getTranslationToRef",value:function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this}},{key:"removeRotationAndScaling",value:function(){var e=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this}},{key:"multiply",value:function(e){var n=new t;return this.multiplyToRef(e,n),n}},{key:"copyFrom",value:function(t){t.copyToArray(this._m);var e=t;return this.updateFlag=e.updateFlag,this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}},{key:"copyToArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._m;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],this}},{key:"multiplyToRef",value:function(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e.markAsUpdated(),this)}},{key:"multiplyToArray",value:function(t,e,n){var i=this._m,r=t.m,o=i[0],a=i[1],u=i[2],s=i[3],y=i[4],l=i[5],h=i[6],c=i[7],f=i[8],_=i[9],v=i[10],m=i[11],x=i[12],k=i[13],R=i[14],d=i[15],z=r[0],T=r[1],w=r[2],p=r[3],F=r[4],g=r[5],I=r[6],M=r[7],A=r[8],P=r[9],V=r[10],D=r[11],C=r[12],L=r[13],Z=r[14],H=r[15];return e[n]=o*z+a*F+u*A+s*C,e[n+1]=o*T+a*g+u*P+s*L,e[n+2]=o*w+a*I+u*V+s*Z,e[n+3]=o*p+a*M+u*D+s*H,e[n+4]=y*z+l*F+h*A+c*C,e[n+5]=y*T+l*g+h*P+c*L,e[n+6]=y*w+l*I+h*V+c*Z,e[n+7]=y*p+l*M+h*D+c*H,e[n+8]=f*z+_*F+v*A+m*C,e[n+9]=f*T+_*g+v*P+m*L,e[n+10]=f*w+_*I+v*V+m*Z,e[n+11]=f*p+_*M+v*D+m*H,e[n+12]=x*z+k*F+R*A+d*C,e[n+13]=x*T+k*g+R*P+d*L,e[n+14]=x*w+k*I+R*V+d*Z,e[n+15]=x*p+k*M+R*D+d*H,this}},{key:"equals",value:function(t){var e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var n=this.m,i=e.m;return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]&&n[4]===i[4]&&n[5]===i[5]&&n[6]===i[6]&&n[7]===i[7]&&n[8]===i[8]&&n[9]===i[9]&&n[10]===i[10]&&n[11]===i[11]&&n[12]===i[12]&&n[13]===i[13]&&n[14]===i[14]&&n[15]===i[15]}},{key:"clone",value:function(){var e=new t;return e.copyFrom(this),e}},{key:"getClassName",value:function(){return"Matrix"}},{key:"getHashCode",value:function(){for(var t=h(this._m[0]),e=1;e<16;e++)t=397*t^h(this._m[e]);return t}},{key:"decomposeToTransformNode",value:function(t){return t.rotationQuaternion=t.rotationQuaternion||new v,this.decompose(t.scaling,t.rotationQuaternion,t.position)}},{key:"decompose",value:function(e,n,i,r){if(this._isIdentity)return i&&i.setAll(0),e&&e.setAll(1),n&&n.copyFromFloats(0,0,0,1),!0;var o=this._m;if(i&&i.copyFromFloats(o[12],o[13],o[14]),(e=e||x.Vector3[0]).x=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),e.y=Math.sqrt(o[4]*o[4]+o[5]*o[5]+o[6]*o[6]),e.z=Math.sqrt(o[8]*o[8]+o[9]*o[9]+o[10]*o[10]),r){var a=r.scaling.x<0?-1:1,u=r.scaling.y<0?-1:1,s=r.scaling.z<0?-1:1;e.x*=a,e.y*=u,e.z*=s}else this.determinant()<=0&&(e.y*=-1);if(0===e._x||0===e._y||0===e._z)return n&&n.copyFromFloats(0,0,0,1),!1;if(n){var y=1/e._x,l=1/e._y,h=1/e._z;t.FromValuesToRef(o[0]*y,o[1]*y,o[2]*y,0,o[4]*l,o[5]*l,o[6]*l,0,o[8]*h,o[9]*h,o[10]*h,0,0,0,0,1,x.Matrix[0]),v.FromRotationMatrixToRef(x.Matrix[0],n)}return!0}},{key:"getRow",value:function(t){if(t<0||t>3)return null;var e=4*t;return new _(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}},{key:"getRowToRef",value:function(t,e){if(t>=0&&t<3){var n=4*t;e.x=this._m[n+0],e.y=this._m[n+1],e.z=this._m[n+2],e.w=this._m[n+3]}return this}},{key:"setRow",value:function(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}},{key:"transpose",value:function(){return t.Transpose(this)}},{key:"transposeToRef",value:function(e){return t.TransposeToRef(this,e),this}},{key:"setRowFromFloats",value:function(t,e,n,i,r){if(t<0||t>3)return this;var o=4*t;return this._m[o+0]=e,this._m[o+1]=n,this._m[o+2]=i,this._m[o+3]=r,this.markAsUpdated(),this}},{key:"scale",value:function(e){var n=new t;return this.scaleToRef(e,n),n}},{key:"scaleToRef",value:function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]*t;return e.markAsUpdated(),this}},{key:"scaleAndAddToRef",value:function(t,e){for(var n=0;n<16;n++)e._m[n]+=this._m[n]*t;return e.markAsUpdated(),this}},{key:"toNormalMatrix",value:function(e){var n=x.Matrix[0];this.invertToRef(n),n.transposeToRef(e);var i=e._m;t.FromValuesToRef(i[0],i[1],i[2],0,i[4],i[5],i[6],0,i[8],i[9],i[10],0,0,0,0,1,e)}},{key:"getRotationMatrix",value:function(){var e=new t;return this.getRotationMatrixToRef(e),e}},{key:"getRotationMatrixToRef",value:function(e){var n=x.Vector3[0];if(!this.decompose(n))return t.IdentityToRef(e),this;var i=this._m,r=1/n._x,o=1/n._y,a=1/n._z;return t.FromValuesToRef(i[0]*r,i[1]*r,i[2]*r,0,i[4]*o,i[5]*o,i[6]*o,0,i[8]*a,i[9]*a,i[10]*a,0,0,0,0,1,e),this}},{key:"toggleModelMatrixHandInPlace",value:function(){var t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated()}},{key:"toggleProjectionMatrixHandInPlace",value:function(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated()}}],[{key:"Use64Bits",get:function(){return y.Z.MatrixUse64Bits}},{key:"FromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new t;return t.FromArrayToRef(e,n,i),i}},{key:"FromArrayToRef",value:function(t,e,n){for(var i=0;i<16;i++)n._m[i]=t[i+e];n.markAsUpdated()}},{key:"FromFloat32ArrayToRefScaled",value:function(t,e,n,i){for(var r=0;r<16;r++)i._m[r]=t[r+e]*n;i.markAsUpdated()}},{key:"IdentityReadOnly",get:function(){return t._IdentityReadOnly}},{key:"FromValuesToRef",value:function(t,e,n,i,r,o,a,u,s,y,l,h,c,f,_,v,m){var x=m._m;x[0]=t,x[1]=e,x[2]=n,x[3]=i,x[4]=r,x[5]=o,x[6]=a,x[7]=u,x[8]=s,x[9]=y,x[10]=l,x[11]=h,x[12]=c,x[13]=f,x[14]=_,x[15]=v,m.markAsUpdated()}},{key:"FromValues",value:function(e,n,i,r,o,a,u,s,y,l,h,c,f,_,v,m){var x=new t,k=x._m;return k[0]=e,k[1]=n,k[2]=i,k[3]=r,k[4]=o,k[5]=a,k[6]=u,k[7]=s,k[8]=y,k[9]=l,k[10]=h,k[11]=c,k[12]=f,k[13]=_,k[14]=v,k[15]=m,x.markAsUpdated(),x}},{key:"Compose",value:function(e,n,i){var r=new t;return t.ComposeToRef(e,n,i,r),r}},{key:"ComposeToRef",value:function(t,e,n,i){var r=i._m,o=e._x,a=e._y,u=e._z,s=e._w,y=o+o,l=a+a,h=u+u,c=o*y,f=o*l,_=o*h,v=a*l,m=a*h,x=u*h,k=s*y,R=s*l,d=s*h,z=t._x,T=t._y,w=t._z;r[0]=(1-(v+x))*z,r[1]=(f+d)*z,r[2]=(_-R)*z,r[3]=0,r[4]=(f-d)*T,r[5]=(1-(c+x))*T,r[6]=(m+k)*T,r[7]=0,r[8]=(_+R)*w,r[9]=(m-k)*w,r[10]=(1-(c+v))*w,r[11]=0,r[12]=n._x,r[13]=n._y,r[14]=n._z,r[15]=1,i.markAsUpdated()}},{key:"Identity",value:function(){var e=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e}},{key:"IdentityToRef",value:function(e){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0)}},{key:"Zero",value:function(){var e=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e}},{key:"RotationX",value:function(e){var n=new t;return t.RotationXToRef(e,n),n}},{key:"Invert",value:function(e){var n=new t;return e.invertToRef(n),n}},{key:"RotationXToRef",value:function(e,n){var i=Math.sin(e),r=Math.cos(e);t.FromValuesToRef(1,0,0,0,0,r,i,0,0,-i,r,0,0,0,0,1,n),n._updateIdentityStatus(1===r&&0===i)}},{key:"RotationY",value:function(e){var n=new t;return t.RotationYToRef(e,n),n}},{key:"RotationYToRef",value:function(e,n){var i=Math.sin(e),r=Math.cos(e);t.FromValuesToRef(r,0,-i,0,0,1,0,0,i,0,r,0,0,0,0,1,n),n._updateIdentityStatus(1===r&&0===i)}},{key:"RotationZ",value:function(e){var n=new t;return t.RotationZToRef(e,n),n}},{key:"RotationZToRef",value:function(e,n){var i=Math.sin(e),r=Math.cos(e);t.FromValuesToRef(r,i,0,0,-i,r,0,0,0,0,1,0,0,0,0,1,n),n._updateIdentityStatus(1===r&&0===i)}},{key:"RotationAxis",value:function(e,n){var i=new t;return t.RotationAxisToRef(e,n,i),i}},{key:"RotationAxisToRef",value:function(t,e,n){var i=Math.sin(-e),r=Math.cos(-e),o=1-r;t.normalize();var a=n._m;a[0]=t._x*t._x*o+r,a[1]=t._x*t._y*o-t._z*i,a[2]=t._x*t._z*o+t._y*i,a[3]=0,a[4]=t._y*t._x*o+t._z*i,a[5]=t._y*t._y*o+r,a[6]=t._y*t._z*o-t._x*i,a[7]=0,a[8]=t._z*t._x*o-t._y*i,a[9]=t._z*t._y*o+t._x*i,a[10]=t._z*t._z*o+r,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,n.markAsUpdated()}},{key:"RotationAlignToRef",value:function(t,e,n){var i=f.Dot(e,t),r=n._m;if(i<-1+a.kn)r[0]=-1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0;else{var o=f.Cross(e,t),u=1/(1+i);r[0]=o._x*o._x*u+i,r[1]=o._y*o._x*u-o._z,r[2]=o._z*o._x*u+o._y,r[3]=0,r[4]=o._x*o._y*u+o._z,r[5]=o._y*o._y*u+i,r[6]=o._z*o._y*u-o._x,r[7]=0,r[8]=o._x*o._z*u-o._y,r[9]=o._y*o._z*u+o._x,r[10]=o._z*o._z*u+i,r[11]=0}r[12]=0,r[13]=0,r[14]=0,r[15]=1,n.markAsUpdated()}},{key:"RotationYawPitchRoll",value:function(e,n,i){var r=new t;return t.RotationYawPitchRollToRef(e,n,i,r),r}},{key:"RotationYawPitchRollToRef",value:function(t,e,n,i){v.RotationYawPitchRollToRef(t,e,n,x.Quaternion[0]),x.Quaternion[0].toRotationMatrix(i)}},{key:"Scaling",value:function(e,n,i){var r=new t;return t.ScalingToRef(e,n,i,r),r}},{key:"ScalingToRef",value:function(e,n,i,r){t.FromValuesToRef(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1,r),r._updateIdentityStatus(1===e&&1===n&&1===i)}},{key:"Translation",value:function(e,n,i){var r=new t;return t.TranslationToRef(e,n,i,r),r}},{key:"TranslationToRef",value:function(e,n,i,r){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,n,i,1,r),r._updateIdentityStatus(0===e&&0===n&&0===i)}},{key:"Lerp",value:function(e,n,i){var r=new t;return t.LerpToRef(e,n,i,r),r}},{key:"LerpToRef",value:function(t,e,n,i){for(var r=i._m,o=t.m,a=e.m,u=0;u<16;u++)r[u]=o[u]*(1-n)+a[u]*n;i.markAsUpdated()}},{key:"DecomposeLerp",value:function(e,n,i){var r=new t;return t.DecomposeLerpToRef(e,n,i,r),r}},{key:"DecomposeLerpToRef",value:function(e,n,i,r){var o=x.Vector3[0],a=x.Quaternion[0],u=x.Vector3[1];e.decompose(o,a,u);var s=x.Vector3[2],y=x.Quaternion[1],l=x.Vector3[3];n.decompose(s,y,l);var h=x.Vector3[4];f.LerpToRef(o,s,i,h);var c=x.Quaternion[2];v.SlerpToRef(a,y,i,c);var _=x.Vector3[5];f.LerpToRef(u,l,i,_),t.ComposeToRef(h,c,_,r)}},{key:"LookAtLH",value:function(e,n,i){var r=new t;return t.LookAtLHToRef(e,n,i,r),r}},{key:"LookAtLHToRef",value:function(e,n,i,r){var o=x.Vector3[0],a=x.Vector3[1],u=x.Vector3[2];n.subtractToRef(e,u),u.normalize(),f.CrossToRef(i,u,o);var s=o.lengthSquared();0===s?o.x=1:o.normalizeFromLength(Math.sqrt(s)),f.CrossToRef(u,o,a),a.normalize();var y=-f.Dot(o,e),l=-f.Dot(a,e),h=-f.Dot(u,e);t.FromValuesToRef(o._x,a._x,u._x,0,o._y,a._y,u._y,0,o._z,a._z,u._z,0,y,l,h,1,r)}},{key:"LookAtRH",value:function(e,n,i){var r=new t;return t.LookAtRHToRef(e,n,i,r),r}},{key:"LookAtRHToRef",value:function(e,n,i,r){var o=x.Vector3[0],a=x.Vector3[1],u=x.Vector3[2];e.subtractToRef(n,u),u.normalize(),f.CrossToRef(i,u,o);var s=o.lengthSquared();0===s?o.x=1:o.normalizeFromLength(Math.sqrt(s)),f.CrossToRef(u,o,a),a.normalize();var y=-f.Dot(o,e),l=-f.Dot(a,e),h=-f.Dot(u,e);t.FromValuesToRef(o._x,a._x,u._x,0,o._y,a._y,u._y,0,o._z,a._z,u._z,0,y,l,h,1,r)}},{key:"LookDirectionLH",value:function(e,n){var i=new t;return t.LookDirectionLHToRef(e,n,i),i}},{key:"LookDirectionLHToRef",value:function(e,n,i){var r=x.Vector3[0];r.copyFrom(e),r.scaleInPlace(-1);var o=x.Vector3[1];f.CrossToRef(n,r,o),t.FromValuesToRef(o._x,o._y,o._z,0,n._x,n._y,n._z,0,r._x,r._y,r._z,0,0,0,0,1,i)}},{key:"LookDirectionRH",value:function(e,n){var i=new t;return t.LookDirectionRHToRef(e,n,i),i}},{key:"LookDirectionRHToRef",value:function(e,n,i){var r=x.Vector3[2];f.CrossToRef(n,e,r),t.FromValuesToRef(r._x,r._y,r._z,0,n._x,n._y,n._z,0,e._x,e._y,e._z,0,0,0,0,1,i)}},{key:"OrthoLH",value:function(e,n,i,r,o){var a=new t;return t.OrthoLHToRef(e,n,i,r,a,o),a}},{key:"OrthoLHToRef",value:function(e,n,i,r,o,a){var u=2/e,s=2/n,y=2/(r-i),l=-(r+i)/(r-i);t.FromValuesToRef(u,0,0,0,0,s,0,0,0,0,y,0,0,0,l,1,o),a&&o.multiplyToRef(R,o),o._updateIdentityStatus(1===u&&1===s&&1===y&&0===l)}},{key:"OrthoOffCenterLH",value:function(e,n,i,r,o,a,u){var s=new t;return t.OrthoOffCenterLHToRef(e,n,i,r,o,a,s,u),s}},{key:"OrthoOffCenterLHToRef",value:function(e,n,i,r,o,a,u,s){var y=2/(n-e),l=2/(r-i),h=2/(a-o),c=-(a+o)/(a-o),f=(e+n)/(e-n),_=(r+i)/(i-r);t.FromValuesToRef(y,0,0,0,0,l,0,0,0,0,h,0,f,_,c,1,u),s&&u.multiplyToRef(R,u),u.markAsUpdated()}},{key:"OrthoOffCenterRH",value:function(e,n,i,r,o,a,u){var s=new t;return t.OrthoOffCenterRHToRef(e,n,i,r,o,a,s,u),s}},{key:"OrthoOffCenterRHToRef",value:function(e,n,i,r,o,a,u,s){t.OrthoOffCenterLHToRef(e,n,i,r,o,a,u,s),u._m[10]*=-1}},{key:"PerspectiveLH",value:function(e,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=new t,s=i,y=r,l=2*s/e,h=2*s/n,c=(y+s)/(y-s),f=-2*y*s/(y-s),_=Math.tan(a);return t.FromValuesToRef(l,0,0,0,0,h,0,_,0,0,c,1,0,0,f,0,u),o&&u.multiplyToRef(R,u),u._updateIdentityStatus(!1),u}},{key:"PerspectiveFovLH",value:function(e,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=new t;return t.PerspectiveFovLHToRef(e,n,i,r,s,!0,o,a,u),s}},{key:"PerspectiveFovLHToRef",value:function(e,n,i,r,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=i,h=r,c=1/Math.tan(.5*e),f=a?c/n:c,_=a?c:c*n,v=y&&0===l?-1:0!==h?(h+l)/(h-l):1,m=y&&0===l?2*h:0!==h?-2*h*l/(h-l):-2*l,x=Math.tan(s);t.FromValuesToRef(f,0,0,0,0,_,0,x,0,0,v,1,0,0,m,0,o),u&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1)}},{key:"PerspectiveFovReverseLHToRef",value:function(e,n,i,r,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=1/Math.tan(.5*e),l=a?y/n:y,h=a?y:y*n,c=Math.tan(s);t.FromValuesToRef(l,0,0,0,0,h,0,c,0,0,-i,1,0,0,1,0,o),u&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1)}},{key:"PerspectiveFovRH",value:function(e,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=new t;return t.PerspectiveFovRHToRef(e,n,i,r,s,!0,o,a,u),s}},{key:"PerspectiveFovRHToRef",value:function(e,n,i,r,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=i,h=r,c=1/Math.tan(.5*e),f=a?c/n:c,_=a?c:c*n,v=y&&0===l?1:0!==h?-(h+l)/(h-l):-1,m=y&&0===l?2*h:0!==h?-2*h*l/(h-l):-2*l,x=Math.tan(s);t.FromValuesToRef(f,0,0,0,0,_,0,x,0,0,v,-1,0,0,m,0,o),u&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1)}},{key:"PerspectiveFovReverseRHToRef",value:function(e,n,i,r,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,y=1/Math.tan(.5*e),l=a?y/n:y,h=a?y:y*n,c=Math.tan(s);t.FromValuesToRef(l,0,0,0,0,h,0,c,0,0,-i,-1,0,0,-1,0,o),u&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1)}},{key:"PerspectiveFovWebVRToRef",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=r?-1:1,s=Math.tan(t.upDegrees*Math.PI/180),y=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),h=Math.tan(t.rightDegrees*Math.PI/180),c=2/(l+h),f=2/(s+y),_=Math.tan(a),v=i._m;v[0]=c,v[1]=v[2]=v[3]=v[4]=0,v[5]=f,v[6]=0,v[7]=_,v[8]=(l-h)*c*.5,v[9]=-(s-y)*f*.5,v[10]=-n/(e-n),v[11]=1*u,v[12]=v[13]=v[15]=0,v[14]=-2*n*e/(n-e),o&&i.multiplyToRef(R,i),i.markAsUpdated()}},{key:"GetFinalMatrix",value:function(e,n,i,r,o,a){var u=e.width,s=e.height,y=e.x,l=e.y,h=t.FromValues(u/2,0,0,0,0,-s/2,0,0,0,0,a-o,0,y+u/2,s/2+l,o,1),c=x.Matrix[0];return n.multiplyToRef(i,c),c.multiplyToRef(r,c),c.multiply(h)}},{key:"GetAsMatrix2x2",value:function(t){var e=t.m,n=[e[0],e[1],e[4],e[5]];return y.Z.MatrixUse64Bits?n:new Float32Array(n)}},{key:"GetAsMatrix3x3",value:function(t){var e=t.m,n=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return y.Z.MatrixUse64Bits?n:new Float32Array(n)}},{key:"Transpose",value:function(e){var n=new t;return t.TransposeToRef(e,n),n}},{key:"TransposeToRef",value:function(t,e){var n=e._m,i=t.m;n[0]=i[0],n[1]=i[4],n[2]=i[8],n[3]=i[12],n[4]=i[1],n[5]=i[5],n[6]=i[9],n[7]=i[13],n[8]=i[2],n[9]=i[6],n[10]=i[10],n[11]=i[14],n[12]=i[3],n[13]=i[7],n[14]=i[11],n[15]=i[15],e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)}},{key:"Reflection",value:function(e){var n=new t;return t.ReflectionToRef(e,n),n}},{key:"ReflectionToRef",value:function(e,n){e.normalize();var i=e.normal.x,r=e.normal.y,o=e.normal.z,a=-2*i,u=-2*r,s=-2*o;t.FromValuesToRef(a*i+1,u*i,s*i,0,a*r,u*r+1,s*r,0,a*o,u*o,s*o+1,0,a*e.d,u*e.d,s*e.d,1,n)}},{key:"FromXYZAxesToRef",value:function(e,n,i,r){t.FromValuesToRef(e._x,e._y,e._z,0,n._x,n._y,n._z,0,i._x,i._y,i._z,0,0,0,0,1,r)}},{key:"FromQuaternionToRef",value:function(t,e){var n=t._x*t._x,i=t._y*t._y,r=t._z*t._z,o=t._x*t._y,a=t._z*t._w,u=t._z*t._x,s=t._y*t._w,y=t._y*t._z,l=t._x*t._w;e._m[0]=1-2*(i+r),e._m[1]=2*(o+a),e._m[2]=2*(u-s),e._m[3]=0,e._m[4]=2*(o-a),e._m[5]=1-2*(r+n),e._m[6]=2*(y+l),e._m[7]=0,e._m[8]=2*(u+s),e._m[9]=2*(y-l),e._m[10]=1-2*(i+n),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated()}}]),t}();m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity();var x=(0,r.Z)((function t(){(0,i.Z)(this,t)}));x.Vector3=u.B.BuildTuple(11,f.Zero),x.Matrix=u.B.BuildTuple(2,m.Identity),x.Quaternion=u.B.BuildTuple(3,v.Zero);var k=(0,r.Z)((function t(){(0,i.Z)(this,t)}));k.Vector2=u.B.BuildTuple(3,c.Zero),k.Vector3=u.B.BuildTuple(13,f.Zero),k.Vector4=u.B.BuildTuple(3,_.Zero),k.Quaternion=u.B.BuildTuple(2,v.Zero),k.Matrix=u.B.BuildTuple(8,m.Identity),(0,s.H)("BABYLON.Vector2",c),(0,s.H)("BABYLON.Vector3",f),(0,s.H)("BABYLON.Vector4",_),(0,s.H)("BABYLON.Matrix",m);var R=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)}}]);
//# sourceMappingURL=088d5a4e-fa5217db97eae250f8f9.js.map